(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Dx0o:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("pVnL")),l=n(a("QILm")),i=n(a("qt7w")),s=n(a("HPmW")),o=n(a("0E8I")),u=n(a("tetp")),c=n(a("rAzH")),d=function(e){var t=e.containerClassName,a=e.className,n=e.text,s=e.options,d=e.children,f=(0,l.default)(e,["containerClassName","className","text","options","children"]),m=!!d,v=!!s,p="function"==typeof d;return o.default.createElement("div",{className:(0,i.default)("has-float-label","select-container",c.default.controlContainer,t)},o.default.createElement("select",(0,r.default)({className:(0,i.default)("select-box",u.default.select,a)},f),m&&!p&&d,m&&p&&v&&s.map(d),!m&&v&&s.map((function(e){return o.default.createElement("option",{key:e.value,value:e.value},e.text)}))),o.default.createElement("label",{htmlFor:f.id},n))};d.displayName="SelectBox",d.defaultProps={disabled:!1,children:null},d.propTypes={id:s.default.string.isRequired,containerClassName:s.default.string,value:s.default.oneOfType([s.default.string,s.default.number,s.default.bool]).isRequired,text:s.default.string,options:s.default.arrayOf(s.default.object),onChange:s.default.func.isRequired,children:s.default.oneOfType([s.default.func,s.default.arrayOf(s.default.node)])};var f=d;t.default=f},hbIb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return"";var t=new Date(e);return"".concat((0,r.default)(t.getDate(),2)," ").concat(n.default[t.getMonth()]," ").concat(t.getFullYear())};var n=l(a("nlUt")),r=l(a("rSgb"));function l(e){return e&&e.__esModule?e:{default:e}}},iI8e:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),l=a("hbIb"),i=a.n(l),s=a("Dx0o"),o=a.n(s),u=a("dOGx"),c=a.n(u),d=a("1kws"),f=a("d6sP"),m=a("Wbzz"),v=a("qGn+");function p(e){return e.isYear?e.year+" Overview":Object(v.a)(e.season)}var g=function(e){var t=e.next,a=e.previous;return r.a.createElement("nav",null,r.a.createElement("ul",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",listStyle:"none",padding:0}},r.a.createElement("li",null,a&&r.a.createElement(m.Link,{to:a.fields.slug,rel:"prev",style:{marginRight:20}},"← ",p(a))),r.a.createElement("li",null,t&&r.a.createElement(m.Link,{to:t.fields.slug,rel:"next"},p(t)," →"))))},y=a("qwlH"),b={textAlign:"right"},h=[{text:""},{text:"Total",style:Object.assign({},b)},{text:"Rated",style:Object.assign({},b)},{text:"Average Rating",style:Object.assign({},b)}];var x=function(e){var t=e.data.sort((function(e,t){return e.season>t.season?1:-1}));return r.a.createElement("div",null,r.a.createElement(y.a,{headers:h},(function(){return t.map((function(e){return r.a.createElement("tr",{key:e.season},r.a.createElement("th",null,r.a.createElement(m.Link,{to:"/"+e.season},Object(v.a)(e.season,!1))),r.a.createElement("td",{"column-title":"Total",className:"cell cell--rhs"},e.seriesCount),r.a.createElement("td",{"column-title":"Rated",className:"cell cell--rhs"},e.ratedCount),r.a.createElement("td",{"column-title":"Average Rating",className:"cell cell--rhs"},e.average))}))})))},O=a("cfVx"),w=a("ihzg"),E=a("dQon"),j=a("gMw9"),S=a("6jik"),D=a("23Ag"),I=a("xjvq"),C=a.n(I),_=a("pwos"),k=a.n(_),A=a("qB1S"),M=a("O0mD");function q(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(a=e[Symbol.iterator]()).next.bind(a)}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var T=[8,11];var P=function(e,t){var a;return"boolean"==typeof e?e:null!==(a=e[t])&&void 0!==a&&a},R={textAlign:"right"},H=[{text:"#",style:Object.assign({},R)},{text:"Title"},{text:"Episode Rating",style:Object.assign({},R)},{text:"Series Average",style:Object.assign({},R)},{text:"Series Highest",style:Object.assign({},R)},{text:"Series Lowest",style:Object.assign({},R)},{text:"Series Mode",style:Object.assign({},R)}];function J(e){var t=e.season,a=e.year,l=e.title,s=e.series,u=e.overview,m=e.hideRatingColumn,v=e.getSeason,p=e.customDescriptiveText,y=e.showFilters,b=e.pageContext,h=e.messages,I=Object(n.useState)(0),_=I[0],N=I[1],R=Object(n.useState)(!1),J=R[0],L=R[1],z=Object(E.a)(),F=0===_,W=P(y,"weeksDropdown"),Y=P(y,"hideCarryOvers"),G=Object(n.useMemo)((function(){return function(e,t){if(!t)return[];for(var a,n=[{value:0,text:"All"}],r=Array(13).fill(null).map((function(e,t){return t+1})),l=new Date(e+"-01T00:00:00.000Z"),i=q(r);!(a=i()).done;){var s=a.value,o=13===s&&T.includes(l.getMonth())?7:6,u=C()(l),c=k()(u);c.setDate(c.getDate()+o),n.push({value:s,text:"Week "+s,startDate:u.toISOString(),endDate:c.toISOString()}),(l=new Date(c)).setDate(l.getDate()+1)}return n.filter((function(e){return!e.startDate||e.startDate<k()(new Date).toISOString()}))}(t,W)}),[t,W]),U=G.find((function(e){return e.value===_})),V=function(e,t){return t&&0!==t.value?Object(A.a)(e,"episodes").filter((function(e){return e.date>=t.startDate&&e.date<=t.endDate})).map((function(a){var n=e.find((function(e){return e.id===a.animeId})),r=Object(M.b)(n.episodes.filter((function(e){return e.date<=t.endDate})));return{id:a.id,animeId:a.animeId,episode:a.episode,rating:a.rating,title:n.title,image:n.image,malId:n.malId,statistics:r,episodes:[a]}})):e}(s.filter((function(e){return!e.isCarryOver||!J})),U).sort(D.a),B=Object(j.a)({series:s}),Q=B.average,Z=B.ratedCount;return r.a.createElement(d.a,null,r.a.createElement(f.a,{title:l}),r.a.createElement("div",null,r.a.createElement("h2",null,l),!!Z&&r.a.createElement("p",null,"Average: ",Q," for ",Z," rated series"),u&&r.a.createElement(x,{data:u}),r.a.createElement("p",{style:{whiteSpace:"pre-line"}},p,!m&&"In the event I have yet to rate a series, the rating will appear as a hyphen (-).\n            This is usually the case for series that are still airing.","\n\r","In the cases where multiple ratings are tied in the mode calculation, one will be arbitrarily selected.","\n\r","Entries are sorted by average desc, rating desc, mode desc, and title asc."),r.a.createElement(w.a,{isYear:!!u,items:h,season:t,year:a}),r.a.createElement("div",Object(S.a)(y&&z,{display:"flex",alignItems:"center",backgroundColor:"var(--primary-colour)",color:"var(--primary-contrast)",padding:"5px",margin:"10px 0"}),W&&r.a.createElement("div",{style:{margin:"0 5px",minWidth:"200px"}},r.a.createElement(o.a,{style:{backgroundColor:"var(--primary-colour)",color:"var(--primary-contrast)"},className:"select-box--with-background",id:"weeks",name:"weeks",text:"Show week(s)",value:_,onChange:function(e){return N(Number(e.target.value))}},G.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.text)})))),r.a.createElement("div",{style:{display:"flex",flex:1}}),Y&&r.a.createElement("div",{style:{margin:"0 5px"}},r.a.createElement(c.a,{className:"hide-carry-overs hide-carry-overs--with-background",id:"hideCarryOvers",name:"hideCarryOvers",checked:J,text:" Hide carry overs",onChange:function(e){return L((function(e){return!e}))}}))),!F&&r.a.createElement("p",null,"You are currently viewing the season filtered to episodes watched between ",i()(U.startDate)," and"," ",i()(U.endDate)," inclusive. All series statistic columns are cumulative for the season up to and including"," ",U.text,"."),!V.length&&r.a.createElement("p",null,r.a.createElement("strong",null,"There are no items to display for the current filters selected.")),F?r.a.createElement(O.a,{hideRatingColumn:m,getSeason:v,items:V}):r.a.createElement(O.a,{overrideHeaders:H,getSeason:v,items:V})),r.a.createElement(g,b))}J.defaultProps={customDescriptiveText:"",showFilters:!1};t.a=J},nlUt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.freeze(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);t.default=n},ptqJ:function(e,t,a){"use strict";a.r(t),a.d(t,"query",(function(){return f}));var n=a("zLVn"),r=a("q1tI"),l=a.n(r),i=a("iI8e"),s=a("qGn+"),o=a("O0mD"),u=a("xoD0"),c=a("L6NH"),d=Object(c.a)();t.default=function(e){var t=e.data,a=Object(n.a)(e,["data"]),r=t.dataJson,c=Object(s.a)(r.season),f=r.season===d,m=t.allInformationJson.nodes.filter((function(e){return e.seasons.includes(r.season)})),v=Object(u.a)(Object(o.a)(c,r.series,r.episodes),(function(e,t){var a=e.episodes.some((function(t){return t.episode===e.totalEpisodes}));return t||!a&&f}));return l.a.createElement(i.a,Object.assign({},a,{messages:m,title:c,series:v,season:r.season,showFilters:!0}))};var f="38206599"},pwos:function(e,t,a){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,((n=a("q+ha"))&&n.__esModule?n:{default:n}).default)(23,59,59);t.default=r},"q+ha":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t,a){return function(n){var r=new Date(n);return new Date(r.getFullYear(),r.getMonth(),r.getDate(),e,t,a)}};t.default=n},rSgb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return(e=e.toString()).length>=t?e:new Array(t-e.length+1).join(a)+e}},tetp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("Yymn").sheet)({select:{display:"flex",justifyContent:"center",minWidth:"100px",minHeight:"25px",padding:"5px",border:"none",cursor:"pointer",boxSizing:"content-box"}});t.default=n},xjvq:function(e,t,a){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,((n=a("q+ha"))&&n.__esModule?n:{default:n}).default)(0,0,0);t.default=r}}]);
//# sourceMappingURL=component---src-templates-season-js-438e6c6fadd6f3481d15.js.map