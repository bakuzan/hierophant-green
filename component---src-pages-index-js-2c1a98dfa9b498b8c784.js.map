{"version":3,"sources":["webpack:///./src/components/Personal.js","webpack:///./src/components/FoeLink.js","webpack:///./src/pages/index.js"],"names":["Personal","data","_312310279","info","site","siteMetadata","avatar","profilePic","childImageSharp","adjective","words","Math","floor","random","length","react_default","a","createElement","style","display","alignItems","marginBottom","rhythm","gatsby_image_default","Object","assign","alt","author","marginRight","borderRadius","maxWidth","href","malUrl","target","rel","FoeLink","_ref","className","props","_objectWithoutPropertiesLoose","classes","filter","x","join","type","IndexItem","slug","text","gatsby_browser_entry","to","textDecoration","color","fontSize","marginTop","__webpack_exports__","_ref2","_useState","useState","showMore","setShowMore","useEffect","window","__theme","items","allDataJson","edges","map","node","seasonal","season","yearCount","slice","i","indexOf","airing","sort","b","date","allowMore","Layout","SEO","title","components_Personal","id","listStyleType","margin","wkBeg","niceDate","fields","key","components_FoeLink","onClick","reduce","p","hasFullYear","includes","year","concat","_toConsumableArray","getSeasonName","query"],"mappings":"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","file":"component---src-pages-index-js-2c1a98dfa9b498b8c784.js","sourcesContent":["import React from 'react';\r\nimport { graphql, useStaticQuery } from 'gatsby';\r\nimport Img from 'gatsby-image';\r\n\r\nimport { words } from '../consts';\r\nimport { rhythm } from '../utils/typography';\r\n\r\nfunction getRandomAdj() {\r\n  return words[Math.floor(Math.random() * words.length)];\r\n}\r\n\r\nfunction Personal() {\r\n  const data = useStaticQuery(graphql`\r\n    query PersonalMetaQuery {\r\n      site {\r\n        siteMetadata {\r\n          author\r\n          malUrl\r\n        }\r\n      }\r\n      profilePic: file(name: { eq: \"profile-pic\" }) {\r\n        childImageSharp {\r\n          fixed(width: 75, height: 75, cropFocus: NORTH) {\r\n            ...GatsbyImageSharpFixed\r\n          }\r\n        }\r\n      }\r\n    }\r\n  `);\r\n\r\n  const info = data.site.siteMetadata;\r\n  const avatar = data.profilePic.childImageSharp;\r\n  const adjective = getRandomAdj();\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginBottom: rhythm(1)\r\n      }}\r\n    >\r\n      <Img\r\n        {...avatar}\r\n        alt={info.author}\r\n        style={{\r\n          marginRight: rhythm(1 / 3),\r\n          marginBottom: 0,\r\n          borderRadius: '50%'\r\n        }}\r\n      />\r\n      <p style={{ maxWidth: 290, marginBottom: 0 }}>\r\n        Seasonal rating data by{' '}\r\n        <a href={info.malUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n          {info.author}\r\n        </a>\r\n        . Behold my {adjective} taste\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Personal;\r\n","import React from 'react';\r\n\r\nfunction FoeLink({ className, ...props }) {\r\n  const classes = ['foe-link', className].filter((x) => !!x).join(' ');\r\n\r\n  return <button type=\"button\" className={classes} {...props}></button>;\r\n}\r\n\r\nexport default FoeLink;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link, graphql } from 'gatsby';\r\n\r\nimport Layout from '../components/Layout';\r\nimport Personal from '../components/Personal';\r\nimport SEO from '../components/SEO';\r\nimport FoeLink from '../components/FoeLink';\r\n\r\nimport { rhythm } from '../utils/typography';\r\nimport getSeasonName from '../utils/getSeasonName';\r\nimport niceDate from '../utils/niceDate';\r\n\r\nfunction IndexItem({ slug, text }) {\r\n  return (\r\n    <li style={{ display: 'flex' }}>\r\n      <Link\r\n        to={slug}\r\n        style={{\r\n          textDecoration: 'none',\r\n          color: 'inherit'\r\n        }}\r\n      >\r\n        <h3\r\n          className=\"season-link\"\r\n          style={{\r\n            fontSize: rhythm(1),\r\n            marginTop: rhythm(1),\r\n            marginBottom: rhythm(1 / 4)\r\n          }}\r\n        >\r\n          {text}\r\n        </h3>\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n\r\nconst CURRENTLY_AIRING = `Currently Airing`;\r\nconst AIRING_LIMIT = 4;\r\n\r\nexport default ({ data }) => {\r\n  const [showMore, setShowMore] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Why window.__theme ?\r\n    // If no theme then js is disabled! So showing button would be pointless\r\n    if (window.__theme) {\r\n      setShowMore(false);\r\n    }\r\n  }, []);\r\n\r\n  const info = data.allDataJson;\r\n  const items = info.edges.map((x) => x.node);\r\n\r\n  const seasonal = items.filter((x) => x.season !== CURRENTLY_AIRING);\r\n  const yearCount = seasonal\r\n    .map((x) => x.season.slice(0, 4))\r\n    .filter((x, i, a) => a.indexOf(x) === i).length;\r\n\r\n  let airing = items\r\n    .filter((x) => x.season === CURRENTLY_AIRING)\r\n    .sort((a, b) => (a.date > b.date ? -1 : 1));\r\n\r\n  const allowMore =\r\n    !showMore && showMore !== null && airing.length > AIRING_LIMIT;\r\n  airing = showMore ? airing : airing.slice(0, AIRING_LIMIT);\r\n\r\n  return (\r\n    <Layout>\r\n      <SEO title=\"Home\" />\r\n      <aside>\r\n        <Personal />\r\n      </aside>\r\n      <div>\r\n        <h2 id=\"airing\">\r\n          <Link to=\"/#airing\">Currently Airing</Link>\r\n        </h2>\r\n        <ul\r\n          style={{ listStyleType: 'none', margin: 0, marginBottom: rhythm(4) }}\r\n        >\r\n          {airing.map((node) => {\r\n            const wkBeg = niceDate(node.fields.slug);\r\n\r\n            return (\r\n              <IndexItem\r\n                key={node.id}\r\n                slug={node.fields.slug}\r\n                text={`Week of ${wkBeg}`}\r\n              />\r\n            );\r\n          })}\r\n          {allowMore && (\r\n            <FoeLink onClick={() => setShowMore(true)}>Show more weeks</FoeLink>\r\n          )}\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <h2 id=\"history\">\r\n          <Link to=\"/#history\">Season History</Link>\r\n        </h2>\r\n        <div>\r\n          {seasonal.length} seasons, over {yearCount} years\r\n        </div>\r\n        <ul\r\n          style={{ listStyleType: 'none', margin: 0, marginBottom: rhythm(4) }}\r\n        >\r\n          {seasonal.reduce((p, node) => {\r\n            const hasFullYear = node.season.includes('-10');\r\n            const year = node.season.slice(0, 4);\r\n\r\n            return [\r\n              ...p,\r\n              hasFullYear && (\r\n                <IndexItem\r\n                  key={`${node.id}-year`}\r\n                  slug={`/${year}/`}\r\n                  text={`${year} Overview`}\r\n                />\r\n              ),\r\n              <IndexItem\r\n                key={node.id}\r\n                slug={node.fields.slug}\r\n                text={getSeasonName(node.season)}\r\n              />\r\n            ];\r\n          }, [])}\r\n        </ul>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport const query = graphql`\r\n  query {\r\n    allDataJson(sort: { fields: [season], order: DESC }) {\r\n      totalCount\r\n      edges {\r\n        node {\r\n          id\r\n          season\r\n          date\r\n          fields {\r\n            slug\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n"],"sourceRoot":""}