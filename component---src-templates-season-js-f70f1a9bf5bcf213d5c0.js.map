{"version":3,"sources":["webpack:///./src/components/Table.js","webpack:///./src/templates/season.js","webpack:///./src/utils/getSeriesStats.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./node_modules/core-js/modules/_strict-method.js"],"names":["borderStyle","borderColor","verticalAlign","Table","_ref","style","headers","children","props","objectWithoutPropertiesLoose_default","react_default","a","createElement","Object","assign","map","_ref2","text","x","key","tdStyle","defaultProps","propTypes","PropTypes","object","arrayOf","shape","string","isRequired","func","rhsAlign","textAlign","seasonHeaders","query","__webpack_exports__","entry","data","dataJson","items","series","sort","b","average","seasonName","getSeasonName","season","rated","filter","rating","ratedCount","length","seasonAverage","roundToTwo","reduce","p","c","Layout","SEO","title","whiteSpace","components_Table","s","i","number","stats","highest","lowest","mode","episodes","getSeriesStats","id","display","gatsby_image_default","flex","image","childImageSharp","NewTabLink","margin","rhythm","href","malId","$export","__webpack_require__","aFunction","toObject","fails","$sort","test","P","F","undefined","comparefn","call","this","module","exports","method","arg"],"mappings":"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","file":"component---src-templates-season-js-f70f1a9bf5bcf213d5c0.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React from 'react';\r\n\r\nconst borderStyle = {\r\n  borderColor: `var(--table-border-colour)`,\r\n  verticalAlign: 'top'\r\n};\r\n\r\nfunction Table({ style, headers, children, ...props }) {\r\n  return (\r\n    <table style={{ ...style }} {...props}>\r\n      <thead>\r\n        <tr>\r\n          {headers.map(({ text, ...x }) => (\r\n            <th\r\n              key={text}\r\n              {...x}\r\n              style={{ ...borderStyle, ...(x.style || {}) }}\r\n            >\r\n              {text}\r\n            </th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody>{children && children({ tdStyle: borderStyle })}</tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nTable.defaultProps = { style: {} };\r\nTable.propTypes = {\r\n  style: PropTypes.object,\r\n  headers: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      text: PropTypes.string.isRequired\r\n    })\r\n  ).isRequired,\r\n  children: PropTypes.func\r\n};\r\n\r\nexport default Table;\r\n","import React from 'react';\r\nimport { graphql } from 'gatsby';\r\nimport Img from 'gatsby-image';\r\n\r\nimport Layout from '../components/Layout';\r\nimport SEO from '../components/SEO';\r\nimport Table from '../components/Table';\r\nimport NewTabLink from '../components/NewTabLink';\r\n\r\nimport getSeasonName from '../utils/getSeasonName';\r\nimport getSeriesStats from '../utils/getSeriesStats';\r\nimport { rhythm } from '../utils/typography';\r\nimport { roundToTwo } from '../utils/helpers';\r\n\r\nconst rhsAlign = { textAlign: 'right' };\r\n\r\nconst seasonHeaders = [\r\n  { text: '#', style: { ...rhsAlign } },\r\n  { text: 'Title' },\r\n  { text: 'Rating', style: { ...rhsAlign } },\r\n  { text: 'Average', style: { ...rhsAlign } },\r\n  { text: 'Highest', style: { ...rhsAlign } },\r\n  { text: 'Lowest', style: { ...rhsAlign } },\r\n  { text: 'Mode', style: { ...rhsAlign } }\r\n];\r\n\r\nexport default ({ data }) => {\r\n  const entry = data.dataJson;\r\n  const items = entry.series.sort((a, b) => b.average - a.average);\r\n  const seasonName = getSeasonName(entry.season);\r\n\r\n  const rated = entry.series.filter((x) => x.rating !== 0);\r\n  const ratedCount = rated.length;\r\n  const seasonAverage = roundToTwo(\r\n    rated.reduce((p, c) => p + c.rating, 0) / ratedCount\r\n  );\r\n\r\n  return (\r\n    <Layout>\r\n      <SEO title={seasonName} />\r\n      <div>\r\n        <h2>{seasonName}</h2>\r\n        {!!ratedCount && (\r\n          <p>\r\n            Average: {seasonAverage} for {ratedCount} rated series\r\n          </p>\r\n        )}\r\n        <p style={{ whiteSpace: 'pre-line' }}>\r\n          In the event I have yet to rate a series, the rating will appear as a\r\n          hypen (-).{'\\n\\r'}This is usually the case for series that are still\r\n          airing. {'\\n\\r'}In the cases where multiple ratings are tied in the\r\n          mode calculation, one will be arbitrarily selected.\r\n        </p>\r\n        <Table headers={seasonHeaders}>\r\n          {({ tdStyle }) =>\r\n            items.map((s, i) => {\r\n              const number = i + 1;\r\n              const stats = getSeriesStats(s);\r\n\r\n              return (\r\n                <tr key={s.id}>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{number}</td>\r\n                  <td style={tdStyle}>\r\n                    <div style={{ display: 'flex' }}>\r\n                      <Img\r\n                        style={{ flex: `0 0 96px` }}\r\n                        {...s.image.childImageSharp}\r\n                      />\r\n                      <NewTabLink\r\n                        style={{ margin: `0 ${rhythm(1 / 2)}` }}\r\n                        href={`https://myanimelist.net/anime/${s.malId}`}\r\n                      >\r\n                        {s.title}\r\n                      </NewTabLink>\r\n                    </div>\r\n                  </td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.rating}</td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.average}</td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.highest}</td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.lowest}</td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.mode}</td>\r\n                </tr>\r\n              );\r\n            })\r\n          }\r\n        </Table>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport const query = graphql`\r\n  query($slug: String!) {\r\n    dataJson(fields: { slug: { eq: $slug } }) {\r\n      id\r\n      season\r\n      series {\r\n        id\r\n        title\r\n        image {\r\n          childImageSharp {\r\n            fixed(width: 96, height: 150) {\r\n              ...GatsbyImageSharpFixed\r\n            }\r\n          }\r\n        }\r\n        malId\r\n        rating\r\n        average\r\n        highest\r\n        lowest\r\n        mode\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import { roundToTwo } from './helpers';\r\n\r\nexport default function getSeriesStats({\r\n  rating,\r\n  average,\r\n  highest,\r\n  lowest,\r\n  mode,\r\n  episodes\r\n}) {\r\n  return {\r\n    rating: rating || '-',\r\n    average: roundToTwo(average),\r\n    highest,\r\n    lowest,\r\n    mode\r\n  };\r\n}\r\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n"],"sourceRoot":""}