{"version":3,"sources":["webpack:///./src/templates/year.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./src/components/Table.js","webpack:///./src/components/Navigation.js","webpack:///./src/components/BaseTemplate.js","webpack:///./src/utils/getSeriesStats.js"],"names":["__webpack_exports__","_ref","data","props","_babel_runtime_helpers_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1___default","series","allDataJson","nodes","reduce","p","c","concat","year","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","_components_BaseTemplate__WEBPACK_IMPORTED_MODULE_3__","Object","assign","title","query","$export","__webpack_require__","aFunction","toObject","fails","$sort","sort","test","P","F","undefined","comparefn","call","this","module","exports","method","arg","borderStyle","verticalAlign","Table","style","headers","children","objectWithoutPropertiesLoose_default","react_default","map","_ref2","text","x","key","tdStyle","defaultProps","propTypes","PropTypes","object","arrayOf","shape","string","isRequired","func","Navigation","next","previous","display","flexWrap","justifyContent","listStyle","padding","gatsby_browser_entry","to","fields","slug","rel","marginRight","isYear","getSeasonName","season","navLinkProps","rhsAlign","textAlign","seasonHeaders","BaseTemplate","pageContext","items","b","average","rated","filter","rating","ratedCount","length","roundToTwo","Layout","SEO","whiteSpace","components_Table","s","i","number","stats","highest","lowest","mode","episodes","getSeriesStats","id","gatsby_image_default","flex","image","childImageSharp","NewTabLink","margin","rhythm","href","malId","components_Navigation"],"mappings":"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","file":"component---src-templates-year-js-1647eda5fe8062cf23af.js","sourcesContent":["import React from 'react';\r\nimport { graphql } from 'gatsby';\r\n\r\nimport BaseTemplate from '../components/BaseTemplate';\r\n\r\nexport default ({ data, ...props }) => {\r\n  const seasons = data.allDataJson.nodes;\r\n  const series = seasons.reduce((p, c) => [...p, ...c.series], []);\r\n  const year = props['*'];\r\n\r\n  return (\r\n    <BaseTemplate {...props} title={`Overview of ${year}`} series={series} />\r\n  );\r\n};\r\n\r\nexport const query = graphql`\r\n  query($slug: String!) {\r\n    allDataJson(filter: { fields: { slug: { regex: $slug } } }) {\r\n      nodes {\r\n        id\r\n        season\r\n        series {\r\n          id\r\n          title\r\n          image {\r\n            childImageSharp {\r\n              fixed(width: 96, height: 150) {\r\n                ...GatsbyImageSharpFixed\r\n              }\r\n            }\r\n          }\r\n          malId\r\n          rating\r\n          average\r\n          highest\r\n          lowest\r\n          mode\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","import './Table.scss';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\n\r\nconst borderStyle = {\r\n  verticalAlign: 'top'\r\n};\r\n\r\nfunction Table({ style, headers, children, ...props }) {\r\n  return (\r\n    <table style={{ ...style }} {...props}>\r\n      <thead>\r\n        <tr>\r\n          {headers.map(({ text, ...x }) => (\r\n            <th\r\n              key={text}\r\n              {...x}\r\n              style={{ ...borderStyle, ...(x.style || {}) }}\r\n            >\r\n              {text}\r\n            </th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody>{children && children({ tdStyle: borderStyle })}</tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nTable.defaultProps = { style: {} };\r\nTable.propTypes = {\r\n  style: PropTypes.object,\r\n  headers: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      text: PropTypes.string.isRequired\r\n    })\r\n  ).isRequired,\r\n  children: PropTypes.func\r\n};\r\n\r\nexport default Table;\r\n","import PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport { Link } from 'gatsby';\r\n\r\nimport getSeasonName from '../utils/getSeasonName';\r\n\r\nfunction Navigation({ next, previous }) {\r\n  return (\r\n    <nav>\r\n      <ul\r\n        style={{\r\n          display: 'flex',\r\n          flexWrap: 'wrap',\r\n          justifyContent: 'space-between',\r\n          listStyle: 'none',\r\n          padding: 0\r\n        }}\r\n      >\r\n        <li>\r\n          {previous && (\r\n            <Link\r\n              to={previous.fields.slug}\r\n              rel=\"prev\"\r\n              style={{ marginRight: 20 }}\r\n            >\r\n              ←{' '}\r\n              {previous.isYear\r\n                ? `${previous.year} Overview`\r\n                : getSeasonName(previous.season)}\r\n            </Link>\r\n          )}\r\n        </li>\r\n        <li>\r\n          {next && (\r\n            <Link to={next.fields.slug} rel=\"next\">\r\n              {next.isYear\r\n                ? `${next.year} Overview`\r\n                : getSeasonName(next.season)}{' '}\r\n              →\r\n            </Link>\r\n          )}\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n\r\nconst navLinkProps = PropTypes.shape({ season: PropTypes.string.isRequired });\r\n\r\nNavigation.propTypes = {\r\n  next: navLinkProps,\r\n  previous: navLinkProps\r\n};\r\n\r\nexport default Navigation;\r\n","import React from 'react';\r\nimport Img from 'gatsby-image';\r\n\r\nimport Layout from './Layout';\r\nimport SEO from './SEO';\r\nimport Table from './Table';\r\nimport NewTabLink from './NewTabLink';\r\nimport Navigation from './Navigation';\r\n\r\nimport getSeriesStats from '../utils/getSeriesStats';\r\nimport { rhythm } from '../utils/typography';\r\nimport { roundToTwo } from '../utils/helpers';\r\n\r\nconst rhsAlign = { textAlign: 'right' };\r\n\r\nconst seasonHeaders = [\r\n  { text: '#', style: { ...rhsAlign } },\r\n  { text: 'Title' },\r\n  { text: 'Rating', style: { ...rhsAlign } },\r\n  { text: 'Average', style: { ...rhsAlign } },\r\n  { text: 'Highest', style: { ...rhsAlign } },\r\n  { text: 'Lowest', style: { ...rhsAlign } },\r\n  { text: 'Mode', style: { ...rhsAlign } }\r\n];\r\n\r\nfunction BaseTemplate({ title, series, pageContext }) {\r\n  const items = series.sort((a, b) => b.average - a.average);\r\n\r\n  const rated = series.filter((x) => x.rating !== 0);\r\n  const ratedCount = rated.length;\r\n  const average = roundToTwo(\r\n    rated.reduce((p, c) => p + c.rating, 0) / ratedCount\r\n  );\r\n\r\n  return (\r\n    <Layout>\r\n      <SEO title={title} />\r\n      <div>\r\n        <h2>{title}</h2>\r\n        {!!ratedCount && (\r\n          <p>\r\n            Average: {average} for {ratedCount} rated series\r\n          </p>\r\n        )}\r\n        <p style={{ whiteSpace: 'pre-line' }}>\r\n          In the event I have yet to rate a series, the rating will appear as a\r\n          hyphen (-).{'\\n\\r'}This is usually the case for series that are still\r\n          airing. {'\\n\\r'}In the cases where multiple ratings are tied in the\r\n          mode calculation, one will be arbitrarily selected.\r\n        </p>\r\n        <Table headers={seasonHeaders}>\r\n          {({ tdStyle }) =>\r\n            items.map((s, i) => {\r\n              const number = i + 1;\r\n              const stats = getSeriesStats(s);\r\n\r\n              return (\r\n                <tr key={s.id}>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{number}</td>\r\n                  <td style={tdStyle}>\r\n                    <div style={{ display: 'flex' }}>\r\n                      <Img\r\n                        style={{ flex: `0 0 96px` }}\r\n                        {...s.image.childImageSharp}\r\n                      />\r\n                      <NewTabLink\r\n                        style={{ margin: `0 ${rhythm(1 / 2)}` }}\r\n                        href={`https://myanimelist.net/anime/${s.malId}`}\r\n                      >\r\n                        {s.title}\r\n                      </NewTabLink>\r\n                    </div>\r\n                  </td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.rating}</td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.average}</td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.highest}</td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.lowest}</td>\r\n                  <td style={{ ...tdStyle, ...rhsAlign }}>{stats.mode}</td>\r\n                </tr>\r\n              );\r\n            })\r\n          }\r\n        </Table>\r\n      </div>\r\n      <Navigation {...pageContext} />\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default BaseTemplate;\r\n","import { roundToTwo } from './helpers';\r\n\r\nexport default function getSeriesStats({\r\n  rating,\r\n  average,\r\n  highest,\r\n  lowest,\r\n  mode,\r\n  episodes\r\n}) {\r\n  return {\r\n    rating: rating || '-',\r\n    average: roundToTwo(average),\r\n    highest,\r\n    lowest,\r\n    mode\r\n  };\r\n}\r\n"],"sourceRoot":""}