"use strict";(self.webpackChunkhierophant_green=self.webpackChunkhierophant_green||[]).push([[152],{63:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=Object.freeze(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);t.default=a},8405:function(e,t,a){var n;t.Z=void 0;var r=(0,((n=a(5041))&&n.__esModule?n:{default:n}).default)(23,59,59);t.Z=r},4327:function(e,t,a){t.Z=function(e){if(!e)return"";var t=new Date(e);return"".concat((0,r.default)(t.getDate(),2)," ").concat(n.default[t.getMonth()]," ").concat(t.getFullYear())};var n=l(a(63)),r=l(a(4990));function l(e){return e&&e.__esModule?e:{default:e}}},4990:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return(e=e.toString()).length>=t?e:new Array(t-e.length+1).join(a)+e}},5041:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t,a){return function(n){var r=new Date(n);return new Date(r.getFullYear(),r.getMonth(),r.getDate(),e,t,a)}};t.default=a},5861:function(e,t,a){var n;t.Z=void 0;var r=(0,((n=a(5041))&&n.__esModule?n:{default:n}).default)(0,0,0);t.Z=r},7056:function(e,t,a){a.d(t,{Z:function(){return I}});var n=a(7294),r=a(4327),l=a(9832),s=a(8633),i=a(5129),o=a(3176),c=a(1597),u=a(6017);function d(e){return e.isYear?`${e.year} Overview`:(0,u.Z)(e.season)}var m=function(e){let{next:t,previous:a}=e;return n.createElement("nav",null,n.createElement("ul",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",listStyle:"none",padding:0}},n.createElement("li",null,a&&n.createElement(c.Link,{to:a.fields.slug,rel:"prev",style:{marginRight:20}},"← ",d(a))),n.createElement("li",null,t&&n.createElement(c.Link,{to:t.fields.slug,rel:"next"},d(t)," →"))))},f=a(7061);const v={textAlign:"right"},p=[{text:""},{text:"Total",style:{...v}},{text:"Rated",style:{...v}},{text:"Average Rating",style:{...v}}];var g=function(e){let{data:t}=e;const a=t.sort(((e,t)=>e.season>t.season?1:-1));return n.createElement("div",null,n.createElement(f.Z,{headers:p},(()=>a.map((e=>n.createElement("tr",{key:e.season},n.createElement("th",null,n.createElement(c.Link,{to:`/${e.season}`},(0,u.Z)(e.season,!1))),n.createElement("td",{"column-title":"Total",className:"cell cell--rhs"},e.seriesCount),n.createElement("td",{"column-title":"Rated",className:"cell cell--rhs"},e.ratedCount),n.createElement("td",{"column-title":"Average Rating",className:"cell cell--rhs"},e.average)))))))},h=a(1289),y=a(704),x=a(1991),E=a(7065),w=a(8324),b=a(7006),Z=a(5861),D=a(8405),S=a(8909),C=a(1390);const k=[8,11];const _=(e,t)=>{var a;return"boolean"==typeof e?e:null!==(a=e[t])&&void 0!==a&&a},O={textAlign:"right"},M=[{text:"#",style:{...O}},{text:"Title"},{text:"Episode Rating",style:{...O}},{text:"Series Average",style:{...O}},{text:"Series Highest",style:{...O}},{text:"Series Lowest",style:{...O}},{text:"Series Mode",style:{...O}}];function N(e){let{season:t,year:a,title:c,series:u,overview:d,hideRatingColumn:f,getSeason:v,customDescriptiveText:p,showFilters:O,pageContext:N,messages:I}=e;const{0:A,1:j}=(0,n.useState)(0),{0:R,1:T}=(0,n.useState)(!1),F=(0,x.S)(),P=0===A,J=_(O,"weeksDropdown"),Y=_(O,"hideCarryOvers"),H=(0,n.useMemo)((()=>function(e,t){if(!t)return[];const a=[{value:0,text:"All"}],n=Array(13).fill(null).map(((e,t)=>t+1));let r=new Date(`${e}-01T00:00:00.000Z`);for(let l of n){const e=13===l&&k.includes(r.getMonth())?7:6,t=(0,Z.Z)(r),n=(0,D.Z)(t);n.setDate(n.getDate()+e),a.push({value:l,text:`Week ${l}`,startDate:t.toISOString(),endDate:n.toISOString()}),r=new Date(n),r.setDate(r.getDate()+1)}return a.filter((e=>!e.startDate||e.startDate<(0,D.Z)(new Date).toISOString()))}(t,J)),[t,J]),L=H.find((e=>e.value===A)),W=function(e,t){return t&&0!==t.value?(0,S.Z)(e,"episodes").filter((e=>e.date>=t.startDate&&e.date<=t.endDate)).map((a=>{const n=e.find((e=>e.id===a.animeId)),r=(0,C._)(n.episodes.filter((e=>e.date<=t.endDate)));return{id:a.id,animeId:a.animeId,episode:a.episode,rating:a.rating,title:n.title,image:n.image,malId:n.malId,statistics:r,episodes:[a]}})):e}(u.filter((e=>!e.isCarryOver||!R)),L),$=W.sort(b.Z),{average:z,ratedCount:B}=(0,E.Z)({series:u});return n.createElement(i.Z,null,n.createElement(o.Z,{title:c}),n.createElement("div",null,n.createElement("h2",null,c),!!B&&n.createElement("p",null,"Average: ",z," for ",B," rated series"),d&&n.createElement(g,{data:d}),n.createElement("p",{style:{whiteSpace:"pre-line"}},p,!f&&"In the event I have yet to rate a series, the rating will appear as a hyphen (-).\n            This is usually the case for series that are still airing.","\n\r","In the cases where multiple ratings are tied in the mode calculation, one will be arbitrarily selected.","\n\r","Entries are sorted by average desc, rating desc, mode desc, and title asc."),n.createElement(y.Z,{isYear:!!d,items:I,season:t,year:a}),n.createElement("div",Object.assign({className:"table-filters"},(0,w.Z)(O&&F,{display:"flex",alignItems:"center",backgroundColor:"var(--primary-colour)",color:"var(--primary-contrast)",padding:"5px",margin:"10px 0"})),J&&n.createElement("div",{style:{margin:"0 5px",minWidth:"200px"}},n.createElement(l.default,{style:{backgroundColor:"var(--primary-colour)",color:"var(--primary-contrast)"},className:"select-box--with-background",id:"weeks",name:"weeks",text:"Show week(s)",value:A,onChange:e=>j(Number(e.target.value))},H.map((e=>n.createElement("option",{key:e.value,value:e.value},e.text))))),n.createElement("div",{style:{display:"flex",flex:1}}),Y&&n.createElement("div",{style:{margin:"0 5px"}},n.createElement(s.Z,{className:"hide-carry-overs hide-carry-overs--with-background",id:"hideCarryOvers",name:"hideCarryOvers",checked:R,text:" Hide carry overs",onChange:e=>T((e=>!e))}))),!P&&n.createElement("p",null,"You are currently viewing the season filtered to episodes watched between ",(0,r.Z)(L.startDate)," and"," ",(0,r.Z)(L.endDate)," inclusive. All series statistic columns are cumulative for the season up to and including"," ",L.text,"."),!$.length&&n.createElement("p",null,n.createElement("strong",null,"There are no items to display for the current filters selected.")),P?n.createElement(h.Z,{hideRatingColumn:f,getSeason:v,items:$}):n.createElement(h.Z,{overrideHeaders:M,getSeason:v,items:$})),n.createElement(m,N))}N.defaultProps={customDescriptiveText:"",showFilters:!1};var I=N},7129:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=a(7294),r=a(7056),l=a(6017),s=a(1390),i=a(9033);const o=(0,a(5868).u)();function c(e){let{data:t,...a}=e;const c=t.dataJson,u=(0,l.Z)(c.season),d=c.season===o,m=t.allInformationJson.nodes.filter((e=>e.seasons.includes(c.season))),f=(0,i.Z)((0,s.Z)(u,c.series,c.episodes),(function(e,t){const a=e.episodes.some((t=>t.episode===e.totalEpisodes));return t||!a&&d}));return n.createElement(r.Z,Object.assign({},a,{messages:m,title:u,series:f,season:c.season,showFilters:!0}))}},9832:function(e,t,a){var n=a(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(434)),l=n(a(215)),s=n(a(1444)),i=n(a(7294)),o=n(a(1858)),c=n(a(1058)),u=["containerClassName","className","text","options","children"],d=function(e){var t=e.containerClassName,a=e.className,n=e.text,d=e.options,m=e.children,f=(0,l.default)(e,u),v=!!m,p=!!d,g="function"==typeof m;return i.default.createElement("div",{className:(0,s.default)("has-float-label","select-container",c.default.controlContainer,t)},i.default.createElement("select",(0,r.default)({className:(0,s.default)("select-box",o.default.select,a)},f),v&&!g&&m,v&&g&&p&&d.map(m),!v&&p&&d.map((function(e){return i.default.createElement("option",{key:e.value,value:e.value},e.text)}))),i.default.createElement("label",{htmlFor:f.id},n))};d.displayName="SelectBox",d.defaultProps={disabled:!1,children:null};var m=d;t.default=m},1858:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a(1334).sheet)({select:{display:"flex",justifyContent:"center",minWidth:"100px",minHeight:"25px",padding:"5px",border:"none",cursor:"pointer",boxSizing:"content-box"}});t.default=n}}]);
//# sourceMappingURL=component---src-templates-season-js-f9c185719fa5884cc27c.js.map